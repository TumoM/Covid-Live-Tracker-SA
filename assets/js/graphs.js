let ctx,chart1,chart2,chart3,chart4,chart5,chart6,data,now,typeCases="linear",typeDeaths="linear",mode="x",intersect="false",labels=[],totalCasesArr=[],provinceNameArr=[],provinceCaseArr=[],totalDeathsArr=[],activeCasesArr=[],dailyNewArr=[],dailyDeathsArr=[],timeFormat="MM/DD/YYYY HH:mm",date="MMM DD",dragOptions={animationDuration:1e3};titleCallback=(t,e)=>{let a=e.labels[t[0].index].toString();return a=a.split(" ",5),a=`${a[1]} ${a[2]}, ${a[3]}`,a},labelCallback=(t,e)=>String(e.datasets[0].data[t.index]),Chart.defaults.global.hover.mode="x",Chart.defaults.global.hover.intersect=!1,Chart.defaults.global.tooltips.mode="x",Chart.defaults.global.tooltips.intersect=!1,Chart.scaleService.updateScaleDefaults("logarithmic",{ticks:{callback:function(t,e){if(0!==t)return numeral(t).format("0a")},autoSkip:!0,autoSkipPadding:100,min:0,minRotation:0,drawTicks:!1,beforeTickToLabelConversion:function(t){return console.log("Label",t),t}}}),Chart.defaults.global.tooltips.callbacks.title=titleCallback,Chart.defaults.global.tooltips.callbacks.label=labelCallback,Chart.defaults.global.tooltips.bodyAlign="center",Chart.defaults.global.tooltips.titleAlign="center",Chart.scaleService.updateScaleDefaults("linear",{xAxes:[{ticks:{min:"2020-03-20",max:moment()}}]}),Chart.defaults.scale.ticks.beginAtZero=!0,setGraphs=(t,e)=>{t.forEach(t=>{labels.push(new Date(t.date)),totalCasesArr.push(t.totalCases),totalDeathsArr.push(t.totalDeaths),activeCasesArr.push(t.activeCases),dailyNewArr.push(t.dailyNew),dailyDeathsArr.push(t.dailyDeaths)}),now=moment(),ctx=document.getElementById("chart1").getContext("2d"),chart1=new Chart(ctx,{type:"line",responsive:!0,maintainAspectRatio:!0,data:{labels:labels,datasets:[{label:"# Cases",backgroundColor:"rgb(210,210,210)",borderColor:"rgb(102,0,80)",data:totalCasesArr,fill:!0}]},options:{plugins:{zoom:{pan:{enabled:!0,mode:"x"},zoom:{enabled:!1,mode:"x",drag:dragOptions,speed:.05}}},elements:{point:{radius:0}},title:{display:!0,text:"Total Cases "+typeCases},scales:{xAxes:[{display:!0,type:"time",gridLines:{drawOnChartArea:!1},ticks:{min:moment("2020-03-01")},time:{unit:"day",displayFormats:{day:"MMM DD",year:"MMM DD YY"}}}],yAxes:[{display:!0,labelAutoFit:!1,type:typeCases}]}}}),ctx=document.getElementById("chart2").getContext("2d"),chart2=new Chart(ctx,{type:"bar",responsive:!0,maintainAspectRatio:!0,data:{labels:labels,datasets:[{label:"New Cases",data:dailyNewArr,backgroundColor:"rgb(109,35,35)",borderColor:"rgb(109,35,35)",borderWidth:0,maxBarThickness:100}]},options:{scales:{yAxes:[{ticks:{min:Math.min.apply(this,dailyNewArr),beginAtZero:!0}}],xAxes:[{type:"time",gridLines:{drawOnChartArea:!1},ticks:{min:moment("2020-03-01")},time:{unit:"day",displayFormats:{day:"MMM DD",year:"MMM DD YY"}}}]}}}),ctx=document.getElementById("chart3").getContext("2d"),chart3=new Chart(ctx,{type:"line",responsive:!0,maintainAspectRatio:!0,data:{labels:labels,datasets:[{label:"# Deaths",backgroundColor:"rgb(210,210,210)",borderColor:"rgb(139,51,67)",data:totalDeathsArr,fill:!0}]},options:{tooltips:{mode:"nearest"},title:{display:!0,text:"Total Deaths "+typeDeaths},elements:{point:{radius:0}},scales:{xAxes:[{display:!0,ticks:{min:moment("2020-03-01")},gridLines:{drawOnChartArea:!1},type:"time",time:{unit:"day",displayFormats:{day:"MMM DD"}}}],yAxes:[{display:!0,type:typeDeaths}]}}}),ctx=document.getElementById("chart4").getContext("2d"),chart4=new Chart(ctx,{type:"bar",responsive:!0,maintainAspectRatio:!0,data:{labels:labels,datasets:[{label:"Daily Deaths",data:dailyDeathsArr,backgroundColor:"rgb(109,35,35)",borderColor:"rgb(109,35,35)",borderWidth:0,maxBarThickness:100}]},options:{scales:{yAxes:[{ticks:{min:Math.min.apply(this,dailyDeathsArr),beginAtZero:!0}}],xAxes:[{type:"time",ticks:{min:moment("2020-03-01")},gridLines:{drawOnChartArea:!1},time:{unit:"day",displayFormats:{day:"MMM DD",year:"MMM DD YY"}}}]}}}),ctx=document.getElementById("chart5").getContext("2d"),chart5=new Chart(ctx,{type:"line",responsive:!0,maintainAspectRatio:!0,data:{labels:labels,datasets:[{label:"# of Cases",backgroundColor:"rgb(210,210,210)",borderColor:"rgb(31,206,102)",data:activeCasesArr,fill:!0}]},options:{title:{display:!0,text:"Active Cases"},elements:{point:{radius:0}},scales:{xAxes:[{display:!0,type:"time",ticks:{min:moment("2020-03-01")},gridLines:{drawOnChartArea:!1},time:{unit:"day",displayFormats:{day:"MMM DD"}}}],yAxes:[{display:!0,type:"linear"}]}}}),document.getElementById("toggleScaleCases").addEventListener("click",(function(){typeCases="linear"===typeCases?"logarithmic":"linear",chart1.options.title.text="Total Cases - "+typeCases,chart1.options.scales.yAxes[0]={display:!0,type:typeCases},chart1.update()})),document.getElementById("toggleScaleDeaths").addEventListener("click",(function(){typeDeaths="linear"===typeDeaths?"logarithmic":"linear",chart3.options.title.text="Total Deaths - "+typeDeaths,chart3.options.scales.yAxes[0]={display:!0,type:typeDeaths},chart3.update()}))};